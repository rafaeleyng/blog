<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="preload" href="https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&amp;display=optional" as="style"/><title>Monitoring Your Application Status With Cabot</title><meta name="description" content="Rafael Eyng&#x27;s tech blog"/><meta name="language" content="en"/><meta name="content-language" content="en"/><meta name="author" content="Rafael Eyng"/><meta name="keywords" content="software, development, javascript, github, node, docker, blog"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="canonical" href="https://rafaeleyng.github.io/monitoring-your-application-status-with-cabot"/><link rel="shortcut icon" href="/favicon.png" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&amp;display=optional" rel="stylesheet" type="text/css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-154633858-1"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-154633858-1');
</script><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/e3df4b49983992d5046044aed1d5fcf0279c70fe_CSS.7b3f6175.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e3df4b49983992d5046044aed1d5fcf0279c70fe_CSS.7b3f6175.chunk.css"/><link rel="preload" href="/_next/static/glNGuxu-y2ipFcQ3DFqVc/pages/post.js" as="script"/><link rel="preload" href="/_next/static/glNGuxu-y2ipFcQ3DFqVc/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.03885e3762b811c06d48.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.2d46a4062a63030a7155.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-fd16d9fd7045bb52879a.js" as="script"/><link rel="preload" href="/_next/static/chunks/a1bc03cf.5784ec4ab76361fe4054.js" as="script"/><link rel="preload" href="/_next/static/chunks/e3df4b49983992d5046044aed1d5fcf0279c70fe.197645e3acd9f743bf4c.js" as="script"/><link rel="preload" href="/_next/static/chunks/e3df4b49983992d5046044aed1d5fcf0279c70fe_CSS.c4a6afef92e8dd991da1.js" as="script"/></head><body><div id="__next"><div class="container"><header class="site-header single-column"><a class="blog-title" href="/">Rafael Eyng&#x27;s Blog</a><nav class="blog-menu"><a target="_blank" rel="noopener" href="https://rafaeleyng.github.io/me">About</a><a target="_blank" rel="noopener" href="https://github.com/rafaeleyng/rafaeleyng.github.io">Github</a></nav></header></div><header class="page-header"><div class="container single-column"><h1>Monitoring Your Application Status With Cabot</h1><p class="post-meta"><time itemProp="datePublished" dateTime="2016-11-19">Nov 19, 2016</time></p></div></header><main class="container single-column"><section class="post"><span class="hidden" itemProp="publisher">Rafael Eyng</span><span class="hidden" itemProp="keywords">cabot, monitoring, status, ping</span><article class="post-content" itemProp="articleBody"><p>Cabot is a application monitoring service. Basically a system that you deploy to your own infrastructure and configure it to check the URLs of your applications at a given interval, and possibly enable some kind of alert when things go down.</p><p>It looks like this:</p><p><img alt="screen shot 2016-11-19 at 11 23 48 pm" src="https://cloud.githubusercontent.com/assets/4842605/20459783/9930e04a-aeb5-11e6-8fed-1ab2aa866d95.png"/></p><p>There&#x27;s a lot of services that offer similar functionality (<a href="https://www.pingdom.com/">Pingdom</a>, <a href="https://uptimerobot.com/">Uptime Robot</a>), but Cabot is self-hosted, open-source and free, so you don&#x27;t have to worry about constraints like a minimum check interval or a maximum number of applications that you can monitor.</p><p>This is a pretty basic &quot;get started&quot; that shows how to quickly get Cabot working. I will show only one way of doing each thing.</p><h2>Installation</h2><p>Install with docker, using <a href="https://github.com/shoonoise/cabot-docker">cabot-docker</a>:</p><ol><li><p>Install docker + docker-compose.</p></li><li><p><code>git clone https://github.com/shoonoise/cabot-docker.git</code></p></li><li><p><code>cd cabot-docker</code> and take a look at <code>cabot_env</code> file. There&#x27;s a lot of variables you can define there to configure your alerts and other integrations, just comment all of them so we don&#x27;t have invalid values later.</p></li><li><p><code>docker-compose up -d</code></p></li></ol><p>It should go up on port 8080 (change it on docker-compose.yml if you want). The default credentials are docker/docker.</p><h2>Concepts</h2><p>3 major concepts in Cabot: check, instance and service.</p><p><strong>Check</strong> is some particular task you want to run to check something. Checks can be of some predefined types, like:</p><ul><li>ping: a ping to a host</li><li>HTTP: call an URL and check the HTTP status.</li></ul><p><strong>Instance</strong> is an actual instance of a machine that will have some service running. It will have a IP/hostname.</p><p><strong>Service</strong> is the macro stuff you want to monitor.</p><p>Cabot&#x27;s documentation is pretty obscure about those concepts, so here is my take on how to use them.</p><h2>Configuring</h2><p>There&#x27;s an N-N relationship between those 3 entities, so it can be pretty confusing how to organize and relate everything. This post is pretty opinionated about how to do it.</p><p>You can have a <strong>service</strong> with multiple <strong>instances</strong>, and multiple <strong>checks</strong> pointing to each instance.</p><p>I&#x27;m using Cabot to monitor both my front-end servers and my API, of multiple applications, running each on multiple servers.</p><p>I start by creating my <strong>instances</strong>. Every newly created instance will have an IP/hostname, and will automatically create a ping <strong>check</strong> to it. For each instance, I create an HTTP <strong>check</strong> that checks for HTTP status and some text match on the return. Then I create a <strong>service</strong> and group on it all of its instances.</p><h2>Automating</h2><p>Clicking is tedious, error prone and slow. Mostly, it is the wrong way.</p><p>Unfortunately, Cabot doesn&#x27;t have a REST API that we can use to configure our services automatically.</p><p>The way I see it, we have 2 options:</p><ul><li><p><a href="">Edit 2016-12-23: deprecated. See cabot-db-config bellow</a> I&#x27;ve created <a href="https://github.com/rafaeleyng/cabot-zombie">cabot-zombie</a>, that spins up a headless browser and configures Cabot based on a Javascript object. Check out the project for more details.</p></li><li><p>Access the Postgres instance that Cabot uses and make some inserts directly. The tables involved are:</p><ul><li>cabotapp_instance_status_checks</li><li>cabotapp_instance</li><li>cabotapp_instancestatussnapshot</li><li>cabotapp_service_instances</li><li>cabotapp_service_status_checks</li><li>cabotapp_service</li><li>cabotapp_servicestatussnapshot</li><li>cabotapp_statuscheck</li><li>cabotapp_statuscheckresult</li></ul></li><li><p>I&#x27;ve created <a href="https://www.npmjs.com/package/cabot-db-config">cabot-db-config</a>, which uses a configuration similar to cabot-zombie, but is way faster and more reliable, because it connects directly to your Cabot database to insert the configuration.</p></li></ul><p>Actually what I use currently is cabot-db-config to create stuff, and if I want to change something, I just delete everything from the tables above and rerun cabot-zombie with my changes.</p></article><div id="disqus_thread"></div><script type="text/javascript">
var disqus_config = function () {
  this.page.url = 'https://rafaeleyng.github.io/monitoring-your-application-status-with-cabot';
  this.page.identifier = '/monitoring-your-application-status-with-cabot';
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://rafaeleyng.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></section></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"document":{"content":"\nCabot is a application monitoring service. Basically a system that you deploy to your own infrastructure and configure it to check the URLs of your applications at a given interval, and possibly enable some kind of alert when things go down.\n\nIt looks like this:\n\n![screen shot 2016-11-19 at 11 23 48 pm](https://cloud.githubusercontent.com/assets/4842605/20459783/9930e04a-aeb5-11e6-8fed-1ab2aa866d95.png)\n\nThere's a lot of services that offer similar functionality ([Pingdom](https://www.pingdom.com/), [Uptime Robot](https://uptimerobot.com/)), but Cabot is self-hosted, open-source and free, so you don't have to worry about constraints like a minimum check interval or a maximum number of applications that you can monitor.\n\nThis is a pretty basic \"get started\" that shows how to quickly get Cabot working. I will show only one way of doing each thing.\n\n## Installation\n\nInstall with docker, using [cabot-docker](https://github.com/shoonoise/cabot-docker):\n\n1. Install docker + docker-compose.\n\n1. `git clone https://github.com/shoonoise/cabot-docker.git`\n\n1. `cd cabot-docker` and take a look at `cabot_env` file. There's a lot of variables you can define there to configure your alerts and other integrations, just comment all of them so we don't have invalid values later.\n\n1. `docker-compose up -d`\n\nIt should go up on port 8080 (change it on docker-compose.yml if you want). The default credentials are docker/docker.\n\n## Concepts\n\n3 major concepts in Cabot: check, instance and service.\n\n**Check** is some particular task you want to run to check something. Checks can be of some predefined types, like:\n  - ping: a ping to a host\n  - HTTP: call an URL and check the HTTP status.\n\n**Instance** is an actual instance of a machine that will have some service running. It will have a IP/hostname.\n\n**Service** is the macro stuff you want to monitor.\n\nCabot's documentation is pretty obscure about those concepts, so here is my take on how to use them.\n\n## Configuring\n\nThere's an N-N relationship between those 3 entities, so it can be pretty confusing how to organize and relate everything. This post is pretty opinionated about how to do it.\n\nYou can have a **service** with multiple **instances**, and multiple **checks** pointing to each instance.\n\nI'm using Cabot to monitor both my front-end servers and my API, of multiple applications, running each on multiple servers.\n\nI start by creating my **instances**. Every newly created instance will have an IP/hostname, and will automatically create a ping **check** to it. For each instance, I create an HTTP **check** that checks for HTTP status and some text match on the return. Then I create a **service** and group on it all of its instances.\n\n## Automating\n\nClicking is tedious, error prone and slow. Mostly, it is the wrong way.\n\nUnfortunately, Cabot doesn't have a REST API that we can use to configure our services automatically.\n\nThe way I see it, we have 2 options:\n\n- [Edit 2016-12-23: deprecated. See cabot-db-config bellow] I've created [cabot-zombie](https://github.com/rafaeleyng/cabot-zombie), that spins up a headless browser and configures Cabot based on a Javascript object. Check out the project for more details.\n\n- Access the Postgres instance that Cabot uses and make some inserts directly. The tables involved are:\n  - cabotapp_instance_status_checks\n  - cabotapp_instance\n  - cabotapp_instancestatussnapshot\n  - cabotapp_service_instances\n  - cabotapp_service_status_checks\n  - cabotapp_service\n  - cabotapp_servicestatussnapshot\n  - cabotapp_statuscheck\n  - cabotapp_statuscheckresult\n\n- I've created [cabot-db-config](https://www.npmjs.com/package/cabot-db-config), which uses a configuration similar to cabot-zombie, but is way faster and more reliable, because it connects directly to your Cabot database to insert the configuration.\n\nActually what I use currently is cabot-db-config to create stuff, and if I want to change something, I just delete everything from the tables above and rerun cabot-zombie with my changes.\n","data":{"title":"Monitoring Your Application Status With Cabot","date":"2016-11-19T21:05:26.000Z","keywords":"cabot, monitoring, status, ping","excerpt":"How to setup a status check for your applications\n"}},"slug":"monitoring-your-application-status-with-cabot"}}},"page":"/post","query":{"slug":"monitoring-your-application-status-with-cabot"},"buildId":"glNGuxu-y2ipFcQ3DFqVc","nextExport":true,"isFallback":false}</script><script nomodule="" src="/_next/static/runtime/polyfills-2998c20c30097f9c8a42.js"></script><script async="" data-next-page="/post" src="/_next/static/glNGuxu-y2ipFcQ3DFqVc/pages/post.js"></script><script async="" data-next-page="/_app" src="/_next/static/glNGuxu-y2ipFcQ3DFqVc/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/framework.03885e3762b811c06d48.js" async=""></script><script src="/_next/static/chunks/commons.2d46a4062a63030a7155.js" async=""></script><script src="/_next/static/runtime/main-fd16d9fd7045bb52879a.js" async=""></script><script src="/_next/static/chunks/a1bc03cf.5784ec4ab76361fe4054.js" async=""></script><script src="/_next/static/chunks/e3df4b49983992d5046044aed1d5fcf0279c70fe.197645e3acd9f743bf4c.js" async=""></script><script src="/_next/static/chunks/e3df4b49983992d5046044aed1d5fcf0279c70fe_CSS.c4a6afef92e8dd991da1.js" async=""></script><script src="/_next/static/glNGuxu-y2ipFcQ3DFqVc/_buildManifest.js" async=""></script><script src="/_next/static/glNGuxu-y2ipFcQ3DFqVc/_ssgManifest.js" async=""></script></body></html>